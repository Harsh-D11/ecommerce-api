<!DOCTYPE html>
<html><head><title>Admin</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head><body class="container mt-5">
<h1>üõ†Ô∏è Admin - Add Products</h1>
<form id="addProduct">
    <input name="id" placeholder="Product ID" class="form-control mb-2" required>
    <input name="name" placeholder="Name" class="form-control mb-2" required>
    <input name="price" type="number" placeholder="Price" class="form-control mb-2" required>
    <input name="stock" type="number" placeholder="Stock" class="form-control mb-2" required>
    <button class="btn btn-success">Add Product</button>
</form>
<h3>Current Products:</h3>
<div id="products"></div>
<script>
fetch('/api/admin/products').then(r=>r.json()).then(p=> {
    document.getElementById('products').innerHTML = 
        Object.entries(p).map(([id,d])=>`<div class="card mb-2 p-3">
            ${d.name} - ‚Çπ${d.price} (${d.stock}) 
            <button class="btn btn-danger btn-sm float-end" 
                    onclick="deleteProduct('${id}')">Delete</button></div>`).join('');
});
document.getElementById('addProduct').onsubmit = e=> {
    e.preventDefault(); fetch('/api/admin/products', {
        method:'POST', headers:{'Content-Type':'application/json'},
        body:JSON.stringify(Object.fromEntries(new FormData(e.target)))
    }).then(()=>location.reload());
};
async function deleteProduct(id) {
    await fetch(`/api/admin/products/${id}`, {method:'DELETE'});
    location.reload();
}
</script></body></html>
